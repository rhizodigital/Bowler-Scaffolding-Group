---
import Container from "@components/Container.astro";
import { type CollectionEntry } from "astro:content";
import Grid from "@components/Grid.astro";
import { Image } from "astro:assets";
export interface Props {
  article: CollectionEntry<"news">;
  authors: CollectionEntry<"authors">[];
}
const dateOptions: Intl.DateTimeFormatOptions = {
  month: "long",
  year: "numeric",
  day: "numeric",
};
const { article, authors } = Astro.props;
---

<div class="bg-zinc-800 py-20 md:py-24 relative">
  <div class="absolute inset-0 text-zinc-700 opacity-40">
    <Grid size="100" id="header-pattern" />
  </div>
  <Container className="relative">
    <div class="flex flex-col lg:flex-row gap-8 items-center">
      <div class="flex flex-col gap-4">
        <div>
          {
            article.data.categories && (
              <div class="flex flex-wrap gap-2">
                {article.data.categories.map((category) => (
                  <span class="text-orange-500 bg-orange-100 px-2 py-1 font-semibold rounded-full text-xs">
                    {category}
                  </span>
                ))}
              </div>
            )
          }
        </div>
        <h1
          class="text-balance text-gray-50 text-4xl leading-tight font-medium mt-4 md:leading-tight mb-4"
          set:html={article.data.title}
        />
        <p class="text-zinc-200 text-lg">
          Written on{" "}
          <time
            datetime={article.data.publishDate.toISOString()}
            class="text-orange-400"
          >
            {article.data.publishDate.toLocaleDateString("en-GB", dateOptions)}
          </time>
          {
            authors.length > 0 && (
              <span>
                {" by "}
                {authors.map((author, index) => (
                  <span class="text-orange-400">
                    {author.data.name}
                    {index < authors.length - 1 ? ", " : ""}
                  </span>
                ))}
              </span>
            )
          }
        </p>
      </div>
      {
        article.data.coverImage && (
          <Image
            src={article.data.coverImage}
            alt={article.data.title}
            width={700}
            class="w-full mb-3 aspect-video object-cover lg:w-1/2 rounded-3xl"
          />
        )
      }
    </div>
  </Container>
</div>
