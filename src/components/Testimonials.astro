---
import "swiper/css";
import "swiper/css/autoplay";
import "swiper/css/navigation";
import Section from "./Section.astro";

import { Icon } from "astro-icon/components";

const testimonials = [
  {
    quote:
      "Bowler Scaffolding Group provided an exceptional service on our recent commercial project. The team was professional, reliable, and highly responsive. We wouldn't hesitate to work with them again.",
    author: "James H.",
    company: "Site Manager, BuildWorks Ltd",
  },
  {
    quote:
      "Their attention to safety and detail is second to none. We had a complex industrial site that required a bespoke scaffolding solution, and Bowler Scaffolding delivered flawlessly. Great team to work with!",
    author: "Sarah K.",
    company: "Project Manager, Apex Industrial",
  },
  {
    quote:
      "We needed scaffolding on short notice for a large-scale project, and Bowler Scaffolding handled it with ease. They kept everything on schedule, which was critical for us. Highly recommend their services.",
    author: "Mark T.",
    company: "Director, Skyline Developments",
  },
  {
    quote:
      "Bowler Scaffolding Group went above and beyond in terms of service and reliability. Their expertise ensured our project was completed safely and on time. Great communication throughout.",
    author: "Emma R.",
    company: "Operations Manager, Prime Construction",
  },
];
---

<Section pattern="full">
  <div class="swiper testimonials">
    <div class="swiper-wrapper flex items-center">
      {
        testimonials.map((testimonial) => (
          <div class="swiper-slide py-10 md:py-8 px-10 md:px-14">
            <blockquote class="bg-white p-10 md:p-12 rounded-3xl text-center shadow-lg">
              <div class="max-w-4xl mx-auto space-y-8">
                <Icon
                  name="material-symbols:format-quote-rounded"
                  size={64}
                  class="text-primary-500 shrink-0 grow-0 rotate-180 mx-auto"
                />

                <p class="text-zinc-900 font-medium text-lg md:text-xl">
                  &ldquo;{testimonial.quote}&rdquo;
                </p>

                <footer>
                  <p class="text-lg md:text-xl font-medium text-primary-600">
                    {testimonial.author}
                  </p>
                  <p class="text-sm font-medium text-zing-700 mb-4">
                    {testimonial.company}
                  </p>
                </footer>
              </div>
            </blockquote>
          </div>
        ))
      }
    </div>
    <div
      class="bg-white transition-all ring-4 ring-zinc-900/10 text-zinc-800 shadow-2xl hover:shadow-lg size-10 md:size-14 rounded-full flex items-center justify-center absolute left-0 top-1/2 z-10 -translate-y-1/2 translate-x-1/2 cursor-pointer"
      data-testimonial-prev
    >
      <Icon
        name="material-symbols:arrow-left-alt-rounded"
        class="size-4 md:size-6 pointer-events-none"
        aria-hidden="true"
        size={30}
      />
    </div>
    <div
      class="bg-white transition-all ring-4 ring-zinc-900/10 text-zinc-800 shadow-2xl hover:shadow-lg size-10 md:size-14 rounded-full flex items-center justify-center absolute right-0 top-1/2 z-10 -translate-y-1/2 -translate-x-1/2 cursor-pointer"
      data-testimonial-next
    >
      <Icon
        name="material-symbols:arrow-right-alt-rounded"
        aria-hidden="true"
        class="size-4 md:size-6 pointer-events-none"
        size={30}
      />
    </div>
  </div>
</Section>

<script>
  import Swiper from "swiper";
  import { Navigation } from "swiper/modules";
  import watchSwiper from "../utils/watchswiper";
  let testimonialSwiper: Swiper;

  testimonialSwiper = new Swiper(".testimonials", {
    modules: [Navigation],
    spaceBetween: 20,

    loop: true,
    navigation: {
      nextEl: "[data-testimonial-next]",
      prevEl: "[data-testimonial-prev]",
    },
  });

  watchSwiper(".testimonials", testimonialSwiper);
</script>
